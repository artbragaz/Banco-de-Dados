CREATE DATABASE IF NOT EXISTS aeroporto;
USE aeroporto;
CREATE TABLE IF NOT EXISTS CIA_AEREA(
id_cia INT PRIMARY KEY,
NOME VARCHAR(45) NOT NULL,
CNPJ VARCHAR(45) NOT NULL);
CREATE TABLE IF NOT EXISTS PASSAGEIRO(
cod_passageiro VARCHAR(45) PRIMARY KEY,
nome VARCHAR(45) NOT NULL,
sobrenome VARCHAR(45) NOT NULL,
data_nasc DATE NOT NULL,
nacionalidade VARCHAR(45));
CREATE TABLE IF NOT EXISTS RESERVA_DE_VOO(
cod_reserva INT PRIMARY KEY,
data_reserva VARCHAR(45) NOT NULL,
forma_pagamento INT NOT NULL,
valor_total DECIMAL (10,2) NOT NULL);
CREATE TABLE IF NOT EXISTS AEROPORTO(
cod_aeroporto VARCHAR(45) PRIMARY KEY,
nome VARCHAR(100) NOT NULL,
cidade VARCHAR(100) NOT NULL,
estado VARCHAR(100) NOT NULL,
pais VARCHAR(100) NOT NULL,
latitude VARCHAR(50) NOT NULL,
longitude VARCHAR(50) NOT NULL,
tamanho_pista DECIMAL(20,1) NOT NULL);

CREATE TABLE IF NOT EXISTS AERONAVE(
cod_aeronave INT PRIMARY KEY,
modelo VARCHAR(45) NOT NULL,
fabricante VARCHAR(45) NOT NULL,
ano YEAR(4) NOT NULL,
quantidade_assentos INT NOT NULL,
cia_aerea_id_cia INT NOT NULL,
CONSTRAINT cia_aer FOREIGN KEY (cia_aerea_id_cia) REFERENCES CIA_AEREA(id_cia));
CREATE TABLE IF NOT EXISTS PASSAGEIRO_RESERVA(
passageiro_cod_passageiro VARCHAR(15) NOT NULL,
reserva_de_voo_cod_reserva INT NOT NULL,
CONSTRAINT res_voo FOREIGN KEY (passageiro_cod_passageiro) REFERENCES PASSAGEIRO(cod_passageiro),
CONSTRAINT res_pas FOREIGN KEY (reserva_de_voo_cod_reserva) REFERENCES RESERVA_DE_VOO(cod_reserva));
CREATE TABLE IF NOT EXISTS VOO(
id_voo INT PRIMARY KEY,
assento VARCHAR(45) NOT NULL,
data_partida DATE NOT NULL,
data_chegada_prev DATE NOT NULL,
hora_partida TIME NOT NULL,
hora_chegada_prev TIME NOT NULL,
aeronave_cod_aeronave INT NOT NULL,
aeroporto_cod_aeroporto_partida VARCHAR(45) NOT NULL,
aeroporto_cod_aeroporto_chegada VARCHAR(45)NOT NULL,
cia_aerea_id_cia INT NOT NULL,
CONSTRAINT 1voo_aer FOREIGN KEY (aeronave_cod_aeronave) REFERENCES AERONAVE(cod_aeronave),
CONSTRAINT 2voo_aer FOREIGN KEY (aeroporto_cod_aeroporto_partida) REFERENCES AEROPORTO(cod_aeroporto),
CONSTRAINT 3voo_aer FOREIGN KEY (aeroporto_cod_aeroporto_chegada) REFERENCES AEROPORTO(cod_aeroporto),
CONSTRAINT 4voo_aer FOREIGN KEY (cia_aerea_id_cia) REFERENCES CIA_AEREA(id_cia));
CREATE TABLE IF NOT EXISTS VOO_RESERVA(
VOO_ID_VOO INT NOT NULL,
VOO_AERONAVE_COD_AERONAVE INT NOT NULL,
VOO_AEROPORTO_COD_AEROPORTO_PARTIDA VARCHAR(45) NOT NULL,
VOO_AEROPORTO_COD_AEROPORTO_CHEGADA VARCHAR(45) NOT NULL,
VOO_CIA_AERA_ID_CIA INT NOT NULL,
VOO_ASSENTO VARCHAR(45) NOT NULL,
RESERVA_DE_VOO_COD_RESERVA INT NOT NULL,
CONSTRAINT res_voo1 FOREIGN KEY (VOO_ID_VOO) REFERENCES VOO(id_voo),
CONSTRAINT res_aer2 FOREIGN KEY (VOO_AERONAVE_COD_AERONAVE) REFERENCES AERONAVE(cod_aeronave),
CONSTRAINT res_aer3 FOREIGN KEY (VOO_AEROPORTO_COD_AEROPORTO_PARTIDA) REFERENCES AEROPORTO(cod_aeroporto),
CONSTRAINT res_aer4 FOREIGN KEY (VOO_AEROPORTO_COD_AEROPORTO_CHEGADA) REFERENCES AEROPORTO(cod_aeroporto),
CONSTRAINT res_aer5 FOREIGN KEY (VOO_CIA_AERA_ID_CIA) REFERENCES CIA_AEREA(id_cia),
CONSTRAINT res_voo6 FOREIGN KEY (VOO_ASSENTO) REFERENCES VOO(ASSENTO),
CONSTRAINT res_voo7 FOREIGN KEY (RESERVA_DE_VOO_COD_RESERVA) REFERENCES RESERVA_DE_VOO(COD_RESERVA));
